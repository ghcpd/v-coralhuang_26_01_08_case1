#!/usr/bin/env python3
"""One-click test runner.
Installs pytest and pytest-cov if missing, then runs the test suite.
"""
import subprocess
import sys

reqs = ("pytest", "pytest-cov")
missing = []
for r in reqs:
    try:
        __import__(r)
    except ImportError:
        missing.append(r)

if missing:
    print("Installing missing test dependencies:", missing)
    subprocess.check_call([sys.executable, "-m", "pip", "install", *missing])

# Run pytest with coverage
cmd = [sys.executable, "-m", "pytest", "--cov=mini_humanize"]
rc = subprocess.call(cmd)
raise SystemExit(rc)
