User: You are a senior Python engineer. You are working in a local Python project with:
- mini_humanize.naturalsize (may be refactored/optimized)
- an unimplemented mini_humanize.parse_size
- a CLI skeleton (python -m mini_humanize)

Deliver a production-ready library. The deliverables must include:

1) README.md  
   - Describe the Python APIs (naturalsize / parse_size) with purpose and parameters  
   - Describe CLI usage with examples  
   - Document how ambiguous inputs are interpreted, error-handling policies, and rounding rules  
   - Provide exactly one command that runs the full test suite

2) tests/ directory (pytest)  
   - You must design the test structure and test cases yourself  
   - Tests must cover the key behavioral dimensions listed below  

3) One-click test script: run_tests  
   - The file name must be exactly `run_tests` (no extension)  
   - You must create this script  
   - The script must be runnable repeatedly in any clean environment  
   - If required dependencies are missing, the script must install them before running tests  
   - The screquirements:

parse_size must handle real-world size strings. Consider:
- Multiple unit systems and conventions
- Various number formats (scientific notation, separators, etc.)
- Ambiguous inputs and edge cases
- Large numbers

You decide the API design (parameters, behavior, error handling). Document all design decisions in README.

naturalsize must preserve backward compatibility (default outputs must not change).

--------------------------------
Testing requirements:

Design a comprehensive test suite. At minimum, you must cover:
- Normal paths with various units and formats
- Edge cases and error conditions
- Round-trip consistency (parse_size ↔ naturalsize)
- CLI functionality (via subprocess)
- Backward compatibility verification

The concrete test cases, coverage goals, and testing strategy are your responsibility.

--------------------------------
Constraints:

- No third-party dependencies beyond pytest / pytest-cov
- Type annotations must be preserved
- Must handle inputs up to at least 2^70 bytes without precision loss
- Parse complexity must be O(n) where n is input string length

parse_size should handle real-world size strings with various unit conventions, number formats, and edge cases.

You decide: API parameters, error handling, ambiguity resolution, supported formats. Document your design clearly.

naturalsize must not break existing behavior on default settings.

--------------------------------
Testing expectations:

Design comprehensive tests covering normal cases, errors, round-trip consistency, CLI, and backward compatibility.

Quality matters: organization, coverage, maintainability.

--------------------------------
Constraints:

- Only pytest/pytest-cov dependencies
- Keep type annotations
- Support numbers >= 2^70 bytes  
- O(n) parse complexity


GitHub Copilot: Optimizing tool selection...I'll inspect the project files to see current implementation before making changes.

Read [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/src/mini_humanize/sizecodec.py)

Read [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/src/mini_humanize/__init__.py)

Read [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/src/mini_humanize/__main__.py)

Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430",
  "codeSnippet": "from mini_humanize.sizecodec import naturalsize\nprint(naturalsize(0))\nprint(naturalsize(0, strip_trailing_zeros=True))\nprint(naturalsize(1024, binary=True))\nprint(naturalsize(1500))\nprint(naturalsize(1500, gnu=True))\nprint(naturalsize(1536, binary=True, strip_trailing_zeros=True))",
  "workingDirectory": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430"
}

Proceeding to implement parse_size, fix naturalsize zero-handling, add tests, README, and the run_tests script.

Using "Replace String in File"


```

```


Using "Replace String in File"


```

```


Created [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/tests/test_sizecodec.py)

Created [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/README.md)

Created [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/run_tests)

0/0 tests passed (0.00%)

Ran terminal command: python run_tests

Read [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/src/mini_humanize/sizecodec.py)

Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430",
  "codeSnippet": "from mini_humanize.sizecodec import parse_size\nprint(parse_size.__module__)\ntry:\n    print(parse_size('1K'))\nexcept Exception as e:\n    print('error:', type(e), e)\n\nprint(parse_size('1K', default_gnu=True))",
  "workingDirectory": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430"
}

Ran `pylanceRunCodeSnippet` 
Completed with input: {
  "workspaceRoot": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430",
  "codeSnippet": "from mini_humanize.sizecodec import parse_size\nimport inspect\nprint(parse_size.__code__.co_filename)\nprint(parse_size('1K', default_gnu=False, strict=True))",
  "workingDirectory": "c:\\Bug_Bash\\26_01_08\\oswe-mini-m23a3s430"
}

Created [](file:///c%3A/Bug_Bash/26_01_08/oswe-mini-m23a3s430/tests/conftest.py)

Using "Replace String in File"


```

```


Ran terminal command: python run_tests

Using "Replace String in File"


```

```


Ran terminal command: python run_tests

Great — I implemented the parser, fixed naturalsize, added tests, README, and the run_tests script; I ran the test suite and all tests passed. Next: tell me if you want changes to behavior, more locales, or extra unit support.### What I changed ✅
- Implemented a robust, O(n) `parse_size` in sizecodec.py (Decimal-based, scientific notation, locale-aware thousands separators, explicit binary/decimal rules, rounding, min/max, strict vs permissive).
- Fixed `naturalsize` zero / trailing-zero handling while preserving default outputs.
- Added a comprehensive pytest suite under tests (parsing, formatting, round-trip, CLI, edge cases).
- Added README.md documenting API, CLI, ambiguity rules, rounding, and design decisions.
- Added a one-click test runner run_tests that installs pytest/pytest-cov if needed and runs the suite.

How to run
- Run the full test suite (installs test deps if missing):
  python run_tests

Examples
- Format: python -m mini_humanize format 1536 --binary --strip-trailing-zeros  -> 1.5 KiB
- Parse:  python -m mini_humanize parse "1.5 KiB"  -> 1536

If you want, I can add more locales, extend unit ranges, or improve CLI help text.

Made changes.